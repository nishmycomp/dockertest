<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice {{invoice_number}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @page {
            margin: 15mm;
            size: A4;
        }
        
        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            color: #000000;
            line-height: 1.4;
            font-size: 12px;
            background: white;
        }
        
        .invoice-container {
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        /* Header Section */
        .header-section {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .company-info {
            flex: 1;
        }
        
        .company-name {
            font-size: 16px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 8px;
        }
        
        .company-address {
            font-size: 12px;
            color: #000000;
            line-height: 1.3;
            margin-bottom: 4px;
        }
        
        .company-abn {
            font-size: 12px;
            color: #000000;
            margin-bottom: 4px;
        }
        
        .company-email {
            font-size: 12px;
            color: #000000;
        }
        
        .invoice-header {
            text-align: right;
            flex: 1;
        }
        
        .invoice-title {
            font-size: 24px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 8px;
        }
        
        .invoice-number {
            font-size: 12px;
            color: #000000;
            margin-bottom: 20px;
        }
        
        .balance-due-section {
            text-align: right;
            margin-bottom: 20px;
        }
        
        .balance-due-label {
            font-size: 12px;
            color: #000000;
            margin-bottom: 4px;
        }
        
        .balance-due-amount {
            font-size: 20px;
            font-weight: bold;
            color: #000000;
        }
        
        /* Invoice Details Section */
        .invoice-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .billing-info {
            flex: 1;
        }
        
        .billing-label {
            font-size: 12px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 8px;
        }
        
        .billing-name {
            font-size: 12px;
            font-weight: bold;
            color: #000000;
        }
        
        .invoice-meta {
            text-align: right;
            flex: 1;
        }
        
        .meta-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }
        
        .meta-label {
            font-size: 12px;
            color: #000000;
            margin-right: 10px;
        }
        
        .meta-value {
            font-size: 12px;
            color: #000000;
            font-weight: normal;
        }
        
        /* Line Items Table */
        .line-items-section {
            margin-bottom: 20px;
        }
        
        .line-items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .line-items-table thead {
            background: #666666;
        }
        
        .line-items-table th {
            padding: 6px 8px;
            text-align: left;
            font-size: 12px;
            font-weight: bold;
            color: #ffffff;
            border: none;
        }
        
        .line-items-table th.text-right {
            text-align: right;
        }
        
        .line-items-table th.text-center {
            text-align: center;
        }
        
        .line-items-table tbody tr {
            border-bottom: none;
        }
        
        .line-items-table td {
            padding: 8px;
            font-size: 12px;
            color: #000000;
            vertical-align: top;
            border: none;
        }
        
        .line-items-table td.text-right {
            text-align: right;
        }
        
        .line-items-table td.text-center {
            text-align: center;
        }
        
        .item-number {
            font-size: 12px;
            color: #000000;
        }
        
        .item-description {
            font-size: 12px;
            color: #000000;
            margin-bottom: 4px;
        }
        
        .item-location {
            font-size: 11px;
            color: #666666;
            margin-left: 8px;
        }
        
        .item-quantity {
            font-size: 12px;
            color: #000000;
        }
        
        .item-rate {
            font-size: 12px;
            color: #000000;
        }
        
        .item-amount {
            font-size: 12px;
            color: #000000;
        }
        
        .gst-yes {
            font-size: 11px;
            font-weight: 600;
            color: #15803D;
        }
        
        .gst-no {
            font-size: 11px;
            color: #9CA3AF;
        }
        
        /* Totals Section */
        .totals-section {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
        }
        
        .totals-container {
            width: 300px;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 2px 0;
        }
        
        .total-label {
            font-size: 12px;
            color: #000000;
        }
        
        .total-value {
            font-size: 12px;
            color: #000000;
            font-weight: bold;
        }
        
        .grand-total-row {
            margin-top: 4px;
            padding-top: 4px;
            border-top: 1px solid #cccccc;
        }
        
        .grand-total-label {
            font-size: 12px;
            color: #000000;
            font-weight: bold;
        }
        
        .grand-total-value {
            font-size: 12px;
            color: #000000;
            font-weight: bold;
        }
        
        .balance-due-row {
            background: #f0f0f0;
            padding: 4px 8px;
            margin-top: 4px;
        }
        
        .balance-due-label {
            font-size: 12px;
            color: #000000;
            font-weight: bold;
        }
        
        .balance-due-value {
            font-size: 12px;
            color: #000000;
            font-weight: bold;
        }
        
        /* Notes Section */
        .notes-section {
            margin-bottom: 30px;
        }
        
        .notes-label {
            font-size: 12px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 8px;
        }
        
        .notes-content {
            font-size: 12px;
            color: #000000;
            line-height: 1.4;
        }
        
        .payment-details {
            font-size: 12px;
            color: #000000;
            margin-bottom: 4px;
        }
        
        /* Payment Footer */
        .payment-footer {
            margin-top: 20px;
            padding: 16px;
            background: #F9FAFB;
            border-radius: 6px;
            border-top: 2px solid #E5E7EB;
        }
        
        .payment-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 12px;
        }
        
        .payment-section h4 {
            font-size: 13px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 8px;
        }
        
        .payment-section p {
            font-size: 12px;
            color: #4B5563;
            margin-bottom: 4px;
            line-height: 1.6;
        }
        
        .payment-section strong {
            font-weight: 600;
            color: #111827;
        }
        
        .payment-full-width {
            margin-top: 8px;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 10px;
            color: #666666;
        }
        
        .footer-line {
            margin-bottom: 4px;
        }
        
        .page-number {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 10px;
            color: #666666;
        }
        
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="invoice-container">
        <!-- Header Section -->
        <div class="header-section">
            <div class="company-info">
                <div class="company-name">{{company_name}}</div>
                <div class="company-address">{{company_address}}</div>
                <div class="company-abn">ABN {{company_abn}}</div>
                <div class="company-email">{{company_email}}</div>
            </div>
            <div class="invoice-header">
                <div class="invoice-title">Tax Invoice</div>
                <div class="invoice-number"># {{invoice_number}}</div>
                <div class="balance-due-section">
                    <div class="balance-due-label">Balance Due</div>
                    <div class="balance-due-amount">${{formatNumber total_amount}}</div>
                </div>
            </div>
        </div>

        <!-- Invoice Details -->
        <div class="invoice-details">
            <div class="billing-info">
                <div class="billing-label">Bill To</div>
                <div class="billing-name">{{billing_details.name}}</div>
            </div>
            <div class="invoice-meta">
                <div class="meta-row">
                    <span class="meta-label">Invoice Date :</span>
                    <span class="meta-value">{{formatDate invoice_date}}</span>
                </div>
                <div class="meta-row">
                    <span class="meta-label">Terms :</span>
                    <span class="meta-value">Due on Receipt</span>
                </div>
                <div class="meta-row">
                    <span class="meta-label">Due Date :</span>
                    <span class="meta-value">{{formatDate due_date}}</span>
                </div>
            </div>
        </div>

        <!-- Line Items Table -->
        <div class="line-items-section">
            <table class="line-items-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Item</th>
                        <th class="text-right">Qty</th>
                        <th class="text-right">Rate</th>
                        <th class="text-center">GST</th>
                        <th class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each line_items}}
                    <tr>
                        <td class="text-center">{{@index}}</td>
                        <td>
                            <div class="item-description">{{this.description}}</div>
                            {{#if this.service_date}}
                            <div class="item-location">{{this.service_date}}</div>
                            {{/if}}
                        </td>
                        <td class="text-right">{{this.quantity}}</td>
                        <td class="text-right">${{formatNumber this.unit_price}}</td>
                        <td class="text-center">
                            {{#if this.gst_applicable}}
                            <span class="gst-yes">{{../gst_rate}}%</span>
                            {{else}}
                            <span class="gst-no">No GST</span>
                            {{/if}}
                        </td>
                        <td class="text-right">${{formatNumber (multiply this.quantity this.unit_price)}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>

        <!-- Totals Section -->
        <div class="totals-section">
            <div class="totals-container">
                <div class="total-row">
                    <span class="total-label">Sub Total</span>
                    <span class="total-value">${{formatNumber subtotal}}</span>
                </div>
                {{#if gst_amount}}
                <div class="total-row">
                    <span class="total-label">GST ({{gst_rate}}%)</span>
                    <span class="total-value">${{formatNumber gst_amount}}</span>
                </div>
                {{/if}}
                <div class="total-row grand-total-row">
                    <span class="grand-total-label">Total</span>
                    <span class="grand-total-value">${{formatNumber total_amount}}</span>
                </div>
                <div class="balance-due-row">
                    <div class="total-row">
                        <span class="balance-due-label">Balance Due</span>
                        <span class="balance-due-value">${{formatNumber total_amount}}</span>
                    </div>
                </div>
            </div>
        </div>


        <!-- Payment Details Footer -->
        <div class="payment-footer">
            <div class="payment-grid">
                <div class="payment-section">
                    <h4>Due Date:</h4>
                    <p>{{formatDate due_date}}</p>
                </div>
                <div class="payment-section">
                    <h4>Payment Details:</h4>
                    <p><strong>Account Name:</strong> {{company_name}}</p>
                    <p><strong>BSB:</strong> {{payment_bsb}}</p>
                    <p><strong>Account Number:</strong> {{payment_account_number}}</p>
                </div>
            </div>
            
            <div class="payment-section payment-full-width">
                <h4>Payment Terms:</h4>
                <p>All invoices are due within 5 days from the date of issuance.</p>
            </div>
            
            <div class="payment-section payment-full-width">
                <h4>Late Fees:</h4>
                <p>• Payments not received within 10 days after the due date will incur a 5% late fee.</p>
                <p>• An additional 1% late fee will be applied for each week the payment remains overdue.</p>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-line">Crafted with ease using</div>
            <div class="footer-line">Visit zoho.com/invoice to create truly professional invoices</div>
        </div>
        
        <div class="page-number">1</div>
    </div>
</body>
</html>